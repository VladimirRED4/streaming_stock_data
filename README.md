# Streaming Stock Data

[![CI](https://github.com/vladimirred4/streaming_stock_data/actions/workflows/ci.yml/badge.svg)](https://github.com/vladimirred4/streaming_stock_data/actions)
[![Rust](https://img.shields.io/badge/rust-1.70%2B-orange.svg)](https://www.rust-lang.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)]()
[![Tests](https://img.shields.io/badge/tests-passing-brightgreen)]()

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –±–∏—Ä–∂–µ–≤—ã—Ö –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –Ω–∞ Rust.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

| Feature | Status | Description |
| --------- | -------- | ------------- |
| TCP —Å–µ—Ä–≤–µ—Ä | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏ |
| UDP —Å—Ç—Ä–∏–º–∏–Ω–≥ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö |
| –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ |
| –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ö–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ç–∏–∫–µ—Ä—ã |
| Ping/Pong | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Keep-alive –º–µ—Ö–∞–Ω–∏–∑–º |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ |

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

![Lines of code](https://img.shields.io/tokei/lines/github/vladimirred4/streaming_stock_data)
![GitHub repo size](https://img.shields.io/github/repo-size/vladimirred4/streaming_stock_data)
![GitHub last commit](https://img.shields.io/github/last-commit/vladimirred4/streaming_stock_data)
![GitHub issues](https://img.shields.io/github/issues/vladimirred4/streaming_stock_data)
![GitHub pull requests](https://img.shields.io/github/issues-pr/vladimirred4/streaming_stock_data)

## ü§ù Contributing

[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](https://github.com/vladimirred4/streaming_stock_data/pulls)
[![GitHub contributors](https://img.shields.io/github/contributors/vladimirred4/streaming_stock_data)](https://github.com/vladimirred4/streaming_stock_data/graphs/contributors)

## üèÜ Code Quality

[![CodeFactor](https://www.codefactor.io/repository/github/vladimirred4/streaming_stock_data/badge)](https://www.codefactor.io/repository/github/vladimirred4/streaming_stock_data)
[![Bugs](https://sonarcloud.io/api/project_badges/measure?project=vladimirred4_streaming_stock_data&metric=bugs)](https://sonarcloud.io/summary/new_code?id=vladimirred4_streaming_stock_data)
[![Code Smells](https://sonarcloud.io/api/project_badges/measure?project=vladimirred4_streaming_stock_data&metric=code_smells)](https://sonarcloud.io/summary/new_code?id=vladimirred4_streaming_stock_data)
[![Maintainability Rating](https://sonarcloud.io/api/project_badges/measure?project=vladimirred4_streaming_stock_data&metric=sqale_rating)](https://sonarcloud.io/summary/new_code?id=vladimirred4_streaming_stock_data)

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –±–∏—Ä–∂–µ–≤—ã—Ö –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –Ω–∞ Rust

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

### –°–µ—Ä–≤–µ—Ä (quote-server)

* TCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏

* –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–æ—Ç–∏—Ä–æ–≤–æ–∫

* UDP —Ä–∞—Å—Å—ã–ª–∫–∞ –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –∫–ª–∏–µ–Ω—Ç–∞–º

* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ ping/pong –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –ö–ª–∏–µ–Ω—Ç (quote-client)

* TCP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

* UDP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ—Ç–∏—Ä–æ–≤–æ–∫

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—ã–≤–æ–¥–∞

* –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –ø–æ —Ç–∏–∫–µ—Ä–∞–º

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cargo run --bin quote-server
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞:

* TCP –ø–æ—Ä—Ç: 8080 (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏)

* UDP –ø–æ—Ä—Ç: 34254 (ping/pong —Å–æ–æ–±—â–µ–Ω–∏—è)

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ä–≤–µ—Ä–∞

```bash
cargo run --bin quote-server -- --help
```

```text
Usage: quote-server [OPTIONS]

Options:
  -p, --port <PORT>                    TCP server port [default: 8080]
      --ping-port <PING_PORT>          UDP port for ping handler [default: 34254]
  -v, --volatility <VOLATILITY>        Volatility for price generation (0.0 to 1.0) [default: 0.01]
  -i, --interval-ms <INTERVAL_MS>      Generation interval in milliseconds [default: 500]
  -t, --ping-timeout <PING_TIMEOUT>    Ping timeout in seconds [default: 5]
  -f, --ticker-file <TICKER_FILE>      Ticker file path [default: tickers.txt]
      --log-level <LOG_LEVEL>          Log level (error, warn, info, debug, trace) [default: info]
      --color <COLOR>                  Enable colored output [default: true]
  -h, --help                           Print help
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∏–µ–Ω—Ç–∞

```bash
cargo run --bin quote-client -- --help
```

```text
Usage: quote-client [OPTIONS]

Options:
  -s, --server-addr <SERVER_ADDR>      TCP server address [default: 127.0.0.1:8080]
  -p, --udp-port <UDP_PORT>            Local UDP port for receiving quotes [default: 55555]
      --server-ping-port <SERVER_PING_PORT>  Server UDP port for ping messages [default: 34254]
  -f, --ticker-file <TICKER_FILE>      Ticker file path (alternative to --tickers)
  -t, --tickers <TICKERS>              Comma-separated list of tickers (alternative to --ticker-file) [default: ]
      --ping-interval <PING_INTERVAL>  Ping interval in seconds [default: 2]
      --output-format <OUTPUT_FORMAT>  Output format (simple, json, detailed, line) [default: line]
  -d, --duration <DURATION>            Run duration in seconds (0 for unlimited) [default: 0]
      --log-level <LOG_LEVEL>          Log level (error, warn, info, debug, trace) [default: info]
      --color <COLOR>                  Enable colored output [default: true]
      --show-timestamp                 Show timestamp in output
  -h, --help                           Print help
```

### –§–æ—Ä–º–∞—Ç—ã –≤—ã–≤–æ–¥–∞

line (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –ö–∞–∂–¥–∞—è –∫–æ—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ

```text
AAPL $185.23 (1250)
TSLA $245.67 (890)
```

detailed - –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å –≤—Ä–µ–º–µ–Ω–µ–º

```text
[1706495234.123] AAPL: $185.23 (volume: 1250)
```

simple - –ü—Ä–æ—Å—Ç–æ–π pipe-—Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

```text
AAPL|185.23|1250|1706495234123
```

json - —Ñ–æ—Ä–º–∞—Ç

```json
{"ticker":"AAPL","price":185.23,"volume":1250,"timestamp":1706495234123}
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
cargo run --bin quote-server

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - –∑–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞
cargo run --bin quote-client -- --tickers AAPL,TSLA,GOOGL --duration 10
```

–ü—Ä–∏–º–µ—Ä 2: –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

```bash
# –ö–ª–∏–µ–Ω—Ç 1
cargo run --bin quote-client -- \
  --tickers AAPL,MSFT,GOOGL \
  --udp-port 55560 \
  --duration 20

# –ö–ª–∏–µ–Ω—Ç 2
cargo run --bin quote-client -- \
  --tickers TSLA,F \
  --udp-port 55561 \
  --duration 15 \
  --output-format detailed

# –ö–ª–∏–µ–Ω—Ç 3 - –æ–¥–∏–Ω —Ç–∏–∫–µ—Ä –≤ JSON
cargo run --bin quote-client -- \
  --tickers NVDA \
  --udp-port 55562 \
  --duration 10 \
  --output-format json
```

–ü—Ä–∏–º–µ—Ä 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```bash
# –°–µ—Ä–≤–µ—Ä —Å –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å—é
cargo run --bin quote-server -- --volatility 0.05 --interval-ms 100

# –ö–ª–∏–µ–Ω—Ç —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
cargo run --bin quote-client -- \
  --tickers AAPL,TSLA \
  --log-level debug \
  --show-timestamp \
  --duration 30
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
streaming_stock_data/
‚îú‚îÄ‚îÄ Cargo.toml
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ tickers.txt                    # –§–∞–π–ª —Å —Ç–∏–∫–µ—Ä–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lib.rs                     # –û–±—â–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ models.rs                  # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (StockQuote, ClientConfig, Command)
‚îÇ   ‚îú‚îÄ‚îÄ generator.rs               # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ—Ç–∏—Ä–æ–≤–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ tcp_server.rs              # TCP —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ client_manager.rs          # –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ udp_sender.rs              # UDP –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∫–æ—Ç–∏—Ä–æ–≤–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.rs                # –°–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ client/
‚îÇ       ‚îî‚îÄ‚îÄ main.rs                # –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ examples/
    ‚îî‚îÄ‚îÄ test_client.rs             # –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
chmod +x test_multiple.sh
./test_multiple.sh
```
